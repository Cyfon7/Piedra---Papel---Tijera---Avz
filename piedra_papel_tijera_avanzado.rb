def print_menu ()
   
    puts "\t\t\t\t"+' __     __    ________    ___    __    __     __ '
    puts "\t\t\t\t"+'|  \   /  |  |    ____|  |   \  |  |  |  |   |  |'
    puts "\t\t\t\t"+'|   \_/   |  |   |____   |    \_|  |  |  |   |  |'
    puts "\t\t\t\t"+'|         |  |    ____|  |   _     |  |  |   |  |'
    puts "\t\t\t\t"+'|  |\_/|  |  |   |____   |  | \    |  |  \___/  |'
    puts "\t\t\t\t"+'|__|   |__|  |________|  |__|  \___|   \_______/ '

    print "\n\n"
end

def print_icons ()

    puts '   ████  █   █  ███                                                          ████          ████  '
    puts '   █     ██  █  █  █                            ██▒▒                      ▓▓░░░░▓▓      ▓▓░░░░▓▓ '
    puts '   ███   █ █ █  █  █                      ██▓▓▓▓░░░░▓▓▓▓██                ██░░░░██      ██░░░░██ '
    puts '   █     █  ██  █  █                    ██░░░░██░░░░██░░░░██                ██░░░░██    ██░░░░██ '
    puts '   ████  █   █  ███                 ▓▓▓▓██░░░░██░░░░██░░░░██                ██░░░░██  ░░░░░░░░██ '
    puts '                                  ▓▓░░░░██░░░░██░░░░██░░░░██                ██░░░░██  ██░░░░▓▓  '
    puts '        ▓▓▓▓  ▓▓▓▓  ██▒▒          ██░░░░██░░░░██░░░░██░░░░██              ▓▓██▓▓░░░░▓▓██░░░░██  '
    puts '  ██████░░░░██░░░░██░░░░██        ██░░░░██░░░░██░░░░██░░░░██        ██████░░░░██░░░░██░░░░██  '
    puts '▓▓░░░░██░░░░██░░░░██░░░░██        ██░░░░██░░░░██░░░░██░░░░██      ██░░░░██░░░░██░░░░██░░░░██  '
    puts '▓▓░░░░██░░░░██░░░░██░░░░██        ██░░░░██░░░░██░░░░██░░░░██      ██░░░░██░░░░██░░░░░░░░░░██  '
    puts '▓▓░░░░██░░░░██░░░░██░░░░██        ██░░░░░░░░░░░░░░░░░░░░░░██      ██░░░░██░░░░██░░░░░░░░░░██  '
    puts '██░░░░██░░░░██████████████        ▓▓░░░░░░░░░░██████████████      ██░░░░██░░░░████████████▓▓  '
    puts '▓▓░░░░██░░░░██░░░░░░░░░░░░██      ▓▓░░░░░░░░░░██░░░░░░░░░░░░██    ▓▓░░░░██░░░░██░░░░░░░░░░░░██  '
    puts '▓▓▓▓▓▓▒▒▓▓▓▓██░░░░░░░░░░░░██      ██░░░░░░░░░░██░░░░░░░░░░░░██    ██▓▓▓▓▒▒▓▓▓▓██░░░░░░░░░░░░██  '
    puts '▓▓░░░░░░░░░░░░██▒▒▓▓▓▓░░░░██      ██░░░░░░░░░░░░▓▓▒▒▓▓▓▓░░░░▓▓    ▓▓░░▒▒░░░░░░░░▓▓▓▓▒▒▒▒░░░░██  '
    puts '░░░░░░░░░░░░░░░░▒▒░░░░░░░░██      ██░░░░░░░░░░░░░░░░░░░░░░░░▓▓    ▓▓░░░░░░░░░░░░░░░░░░░░░░░░██ '
    puts '░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓      ██░░░░░░░░░░░░░░░░░░░░░░░░██    ██░░░░░░░░░░░░░░░░░░░░░░░░██ '
    puts '░░░░░░░░░░░░░░░░░░░░░░░░██        ██░░░░░░░░░░░░░░░░░░░░░░██      ██░░░░░░░░░░░░░░░░░░░░░░██ '
    puts '██░░░░░░░░░░░░░░░░░░░░██          ██░░░░░░░░░░░░░░░░░░░░██        ██░░░░░░░░░░░░░░░░░░░░██ '
    puts '██░░░░░░░░░░░░░░░░░░██            ██░░░░░░░░░░░░░░░░░░██          ██░░░░░░░░░░░░░░░░░░██ '
    puts '██░░░░░░░░░░░░░░██                ██░░░░░░░░░░░░░░██              ██░░░░░░░░░░░░░░██     '
    puts '██░░░░░░░░░░░░░░██                ██░░░░░░░░░░░░░░██              ██░░░░░░░░░░░░░░██     '

    print "\n\n"
end


def print_winner ()
 
    puts "\t\t"+' __     __    ________    ___    __    ___    __    ________    _______'
    puts "\t\t"+'|  | _ |  |  |__    __|  |   \  |  |  |   \  |  |  |    ____|  |   __  \ '
    puts "\t\t"+'|  |/ \|  |     |  |     |    \_|  |  |    \_|  |  |   |____   |  |__|  |'
    puts "\t\t"+'|    _    |     |  |     |   _     |  |   _     |  |    ____|  |   _   / '
    puts "\t\t"+'|   / \   |   __|  |__   |  | \    |  |  | \    |  |   |____   |  | \  \ '
    puts "\t\t"+'|__/   \__|  |________|  |__|  \___|  |__|  \___|  |________|  |__|  \__\ ' 

    print "\n"
end

def print_player (player)

    if (player == 1)
        puts "\t\t\t\t\t"+' _______     '
        puts "\t\t\t\t\t"+'|   __  \       111 '
        puts "\t\t\t\t\t"+'|  |__|  |    11111 '
        puts "\t\t\t\t\t"+'|   ____/       111 '
        puts "\t\t\t\t\t"+'|  |            111 '
        puts "\t\t\t\t\t"+'|__|            111'
    else
        puts "\t\t\t\t\t"+' _______     '
        puts "\t\t\t\t\t"+'|   __  \      22222 '
        puts "\t\t\t\t\t"+'|  |__|  |    22   22  '
        puts "\t\t\t\t\t"+'|   ____/         22 '
        puts "\t\t\t\t\t"+'|  |            222 '
        puts "\t\t\t\t\t"+'|__|          2222222'
    end

    print "\n"
end

def print_tie ()
    
    puts "\t\t\t\t"+' ________    ________    ________  '
    puts "\t\t\t\t"+'|__    __|  |__    __|  |    ____| '
    puts "\t\t\t\t"+'   |  |        |  |     |   |____  '
    puts "\t\t\t\t"+'   |  |        |  |     |    ____| '
    puts "\t\t\t\t"+'   |  |      __|  |__   |   |____  '
    puts "\t\t\t\t"+'   |__|     |________|  |________| ' 

    print "\n"
end

def print_rps ()
    puts "\t\t\t"+'        ___                 ________               _    _'  
    puts "\t\t\t"+'    __./   \____           |        |\            (_)  / )' 
    puts "\t\t\t"+'   /   `. _/    \          |  ~~  ~~|_\             | (_/ '
    puts "\t\t\t"+'  |     /   \    |         |  ~~~     |            _+/  ' 
    puts "\t\t\t"+'  |    |     \   |         |  ~~~~~   |           //|\ '  
    puts "\t\t\t"+'  \___/       \ /          |  ~~~~~~  |          // | )'               
    puts "\t\t\t"+'     `.\______/            |__________|         (/  |/  ' 

    print "\n\n"
end

def clear_screen ()    #Limpia la pantalla solo en Visual Studio Code
    #print "\e[2J\e[f"
    system('clear')
end

def opc_invalid (opc)  #Valida la opcion del menu
    !((opc >= 1) && (opc <= 4))
end

def show_menu (player, invalid_opc)       #Muestra menu
    
    print_menu()
    print_rps()

    print "\n\n"
    print "\t\t\t\t\t\t"+"Turno jugador "
    if player == 1
        puts " - UNO -"
    else
        puts " - DOS -"
    end

    if invalid_opc
        puts "\t\t\t\t\t"+"      Ingrese una Opcion Valida"
    else
        puts " "
    end

    print "\n"
    puts "\t\t\t\t\t\t"+"1. Piedra"
    puts "\t\t\t\t\t\t"+"2. Papel"
    puts "\t\t\t\t\t\t"+"3. Tijeras"
    puts "\t\t\t\t\t\t"+"4. Salir"

end

def winner (opc_p1,opc_p2)

    if (opc_p1 == opc_p2)                  #Empate
        0
    else
        piedra = ((opc_p1 == 1) && (opc_p2 == 3))
        papel = ((opc_p1 == 2) && (opc_p2 == 1))
        tijera = ((opc_p1 == 3) && (opc_p2 == 2))

        if (piedra || papel || tijera)     #Winner player 1
            1
        else                               #Winner player 2
            2
        end
    end
end

def show_winner(win_player)                #Muestra mensaje WINNER
    print_winner()
    print_player(win_player)    
end

current_opc = 0
opc_player_1 = 0
opc_player_2 = 0
current_player = 1
end_game = false
close_menu = false
show_invalid = false

#Menu & Validation 

while ((opc_invalid(opc_player_1) || opc_invalid(opc_player_2)) && (!close_menu) && (!end_game))
    
    clear_screen()

    show_menu(current_player,show_invalid)       #Muestra Menu
    print "\n\t\t\t\t\t\tTu Opcion = "
    current_opc = gets.to_i

    if (!opc_invalid(current_opc))               #Opcion es Valida
        if current_opc == 4                      #Caso Salir
            end_game = true
        elsif current_player == 1                #Guardar Opcion Player 1
            opc_player_1 = current_opc
            current_player = 2
        elsif current_player == 2                #Guardar Opcion Player 2
            opc_player_2 = current_opc
            close_menu  = true
        else                                     #Esto nunca deberia pasar
            clear_screen()
            current_player = 1
        end
        show_invalid = false
    else                                         #Proximo refresh mostrara Opcion Invalida
        show_invalid = true
    end
end

if !end_game
    result = winner(opc_player_1,opc_player_2)

    clear_screen()
    
    if result == 0
        print_tie()
    else
        show_winner(result)
    end
    print_icons()
else
    clear_screen()
    print_icons()
end